---
const navItems = [
    { name: "Accueil", href: "/" },
    { name: "Tarifs", href: "/tarifs" },
    { name: "Mémentos", href: "/mementos" },
];
---

<header id="main-header" class="fixed top-0 w-full z-50 transition-all duration-300 py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center">
            <!-- Logo -->
            <div class="shrink-0 flex items-center">
                <a href="/" class="flex items-center gap-3 group">
                    <img
                        src="/LogoApp.webp"
                        alt="Casque En Mains"
                        class="h-10 w-10 transition-transform duration-200 group-hover:scale-110"
                    />
                    <span class="text-xl font-bold tracking-tight text-white hidden sm:inline">
                        Casque En <span class="text-accent">Mains</span>
                    </span>
                </a>
            </div>

            <!-- Desktop Menu (Floating Pill) -->
            <nav
                class="hidden md:flex items-center space-x-1 px-4 py-2 rounded-full glass border border-white/10 bg-white/5 backdrop-blur-md shadow-lg shadow-black/10"
            >
                {
                    navItems.map((item) => (
                        <a
                            href={item.href}
                            class="text-gray-300 hover:text-white hover:bg-white/10 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200"
                        >
                            {item.name}
                        </a>
                    ))
                }
            </nav>

            <!-- CTA Button -->
            <div class="hidden md:flex items-center">
                <a
                    href="https://app.casqueenmains.fr"
                    class="bg-accent hover:bg-accent-hover text-white px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-200 shadow-lg shadow-accent/20 hover:shadow-accent/40 hover:-translate-y-0.5"
                >
                    Accéder à l'app
                </a>
            </div>

            <!-- Mobile menu button -->
            <div class="md:hidden flex items-center">
                <button
                    type="button"
                    class="text-gray-300 hover:text-white focus:outline-none p-2 rounded-full hover:bg-white/10 transition-colors"
                    aria-label="Menu"
                    id="mobile-menu-button"
                >
                    <svg
                        class="h-6 w-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div
        class="md:hidden hidden absolute top-20 left-4 right-4 glass rounded-2xl border border-white/10 p-4 shadow-xl transform transition-all duration-200 origin-top"
        id="mobile-menu"
    >
        <div class="space-y-2">
            {
                navItems.map((item) => (
                    <a
                        href={item.href}
                        class="text-gray-300 hover:text-white hover:bg-white/10 block px-4 py-3 rounded-xl text-base font-medium transition-colors"
                    >
                        {item.name}
                    </a>
                ))
            }
            <div class="pt-2 border-t border-white/10 mt-2">
                <a
                    href="https://app.casqueenmains.fr"
                    class="text-center w-full block bg-accent hover:bg-accent-hover text-white px-4 py-3 rounded-xl text-base font-medium transition-colors shadow-lg shadow-accent/20"
                >
                    Accéder à l'app
                </a>
            </div>
        </div>
    </div>
</header>

<style>
    /* Header scrolled state - tous les écrans */
    #main-header.scrolled {
        background: linear-gradient(135deg, rgba(11, 17, 33, 0.95), rgba(21, 30, 50, 0.95));
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
</style>

<script>
    const btn = document.getElementById("mobile-menu-button");
    const menu = document.getElementById("mobile-menu");
    const header = document.getElementById("main-header");

    // Mobile menu toggle
    if (btn && menu) {
        btn.addEventListener("click", () => {
            const isHidden = menu.classList.contains("hidden");
            if (isHidden) {
                menu.classList.remove("hidden");
                // Simple animation
                menu.style.opacity = "0";
                menu.style.transform = "scale(0.95) translateY(-10px)";
                requestAnimationFrame(() => {
                    menu.style.opacity = "1";
                    menu.style.transform = "scale(1) translateY(0)";
                });
            } else {
                menu.style.opacity = "0";
                menu.style.transform = "scale(0.95) translateY(-10px)";
                setTimeout(() => {
                    menu.classList.add("hidden");
                }, 200);
            }
        });
    }

    // Scroll effect - tous les écrans
    if (header) {
        let lastScroll = 0;

        window.addEventListener("scroll", () => {
            const currentScroll = window.scrollY;

            if (currentScroll > 50) {
                header.classList.add("scrolled");
            } else {
                header.classList.remove("scrolled");
            }

            lastScroll = currentScroll;
        });

        // Check au chargement
        if (window.scrollY > 50) {
            header.classList.add("scrolled");
        }
    }
</script>
