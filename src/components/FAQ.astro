---
const faqs = [
    {
        question: "L'application est-elle gratuite ?",
        answer: "Nous proposons une version gratuite qui vous donne accès à une partie du contenu pour découvrir l'application. Pour débloquer l'intégralité des fiches, quiz et fonctionnalités, vous pouvez opter pour nos formules d'abonnement (Mensuel ou Annuel).",
    },
    {
        question: "Sur quels appareils puis-je utiliser Casque en mains ?",
        answer: "Casque en mains est une Progressive Web App (PWA). Elle est accessible depuis n'importe quel navigateur web sur ordinateur, tablette et smartphone. Vous pouvez également l'installer sur votre écran d'accueil mobile pour une expérience comme une application native.",
    },
    {
        question: "Le contenu est-il mis à jour régulièrement ?",
        answer: "Oui, absolument. Notre équipe veille en permanence aux évolutions réglementaires et aux actualités du métier de Sapeur-Pompier. Les fiches de révision et les questions sont régulièrement actualisées pour vous garantir une préparation optimale.",
    },
    {
        question: "Puis-je résilier mon abonnement à tout moment ?",
        answer: "Oui, nos abonnements sont sans engagement. Vous pouvez gérer votre abonnement directement depuis votre espace personnel et l'arrêter quand vous le souhaitez. L'accès Premium restera actif jusqu'à la fin de la période en cours.",
    },
];
---

<section class="py-24 bg-navy-900 relative overflow-hidden">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
                Questions fréquentes
            </h2>
            <p class="text-gray-400">
                Tout ce que vous devez savoir avant de commencer.
            </p>
        </div>

        <div class="space-y-4">
            {
                faqs.map((faq, index) => (
                    <div class="glass-card rounded-2xl overflow-hidden border border-white/5 transition-all duration-300 hover:border-white/10">
                        <button
                            class="w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none group"
                            aria-expanded="false"
                            onclick={`toggleFaq(${index})`}
                        >
                            <span class="text-lg font-medium text-white group-hover:text-accent transition-colors">
                                {faq.question}
                            </span>
                            <span class="ml-6 shrink-0 text-gray-400 group-hover:text-white transition-colors">
                                <svg
                                    class="w-6 h-6 transform transition-transform duration-200"
                                    id={`icon-${index}`}
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M19 9l-7 7-7-7"
                                    />
                                </svg>
                            </span>
                        </button>
                        <div
                            class="hidden px-6 pb-6 text-gray-400 leading-relaxed"
                            id={`content-${index}`}
                        >
                            {faq.answer}
                        </div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<script is:inline>
    function toggleFaq(index) {
        const content = document.getElementById(`content-${index}`);
        const icon = document.getElementById(`icon-${index}`);

        if (content.classList.contains("hidden")) {
            // Close all others
            document
                .querySelectorAll('[id^="content-"]')
                .forEach((el) => el.classList.add("hidden"));
            document
                .querySelectorAll('[id^="icon-"]')
                .forEach((el) => el.classList.remove("rotate-180"));

            // Open current
            content.classList.remove("hidden");
            icon.classList.add("rotate-180");
        } else {
            content.classList.add("hidden");
            icon.classList.remove("rotate-180");
        }
    }
</script>
