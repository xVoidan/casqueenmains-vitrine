---
import Layout from "../../layouts/Layout.astro";
import { sheets } from "../../data/sheets";

// Group sheets by category
const sheetsByCategory = sheets.reduce(
    (acc, sheet) => {
        if (!acc[sheet.category]) {
            acc[sheet.category] = [];
        }
        acc[sheet.category].push(sheet);
        return acc;
    },
    {} as Record<string, typeof sheets>,
);
---

<Layout
    title="Mémento"
    description="Fiches de révisions pour le concours de Sapeur-Pompier."
>
    <div class="pt-32 pb-20 min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12">
                <h1 class="text-4xl font-bold text-white mb-4">Mémento</h1>
                <p class="text-gray-400">
                    Retrouvez l'essentiel des connaissances à maîtriser.
                </p>
            </div>

            <div class="space-y-12">
                {
                    Object.entries(sheetsByCategory).map(
                        ([category, categorySheets]) => (
                            <div>
                                <h2 class="text-2xl font-semibold text-accent mb-6 flex items-center">
                                    <span class="w-2 h-8 bg-accent rounded-full mr-3" />
                                    {category}
                                </h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {categorySheets.map((sheet) => (
                                        <a
                                            href={`/memento/${sheet.slug}`}
                                            class="group block h-full"
                                        >
                                            <div class="glass-card p-6 rounded-xl h-full hover:bg-white/5 transition-all duration-300 border border-white/5 hover:border-accent/30 group-hover:-translate-y-1">
                                                <h3 class="text-xl font-bold text-white mb-2 group-hover:text-accent transition-colors">
                                                    {sheet.title}
                                                </h3>
                                                <p class="text-gray-400 text-sm line-clamp-3">
                                                    {sheet.description}
                                                </p>
                                                <div class="mt-4 flex items-center text-sm text-accent font-medium">
                                                    Lire la fiche
                                                    <svg
                                                        class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
                                                        fill="none"
                                                        viewBox="0 0 24 24"
                                                        stroke="currentColor"
                                                    >
                                                        <path
                                                            stroke-linecap="round"
                                                            stroke-linejoin="round"
                                                            stroke-width="2"
                                                            d="M9 5l7 7-7 7"
                                                        />
                                                    </svg>
                                                </div>
                                            </div>
                                        </a>
                                    ))}
                                </div>
                            </div>
                        ),
                    )
                }
            </div>
        </div>
    </div>
</Layout>
